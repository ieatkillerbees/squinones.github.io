<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Samantha Quiñones</title>
	
	<meta name="author" content="Samantha Quiñones">

	<!-- Enable responsive viewport -->
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
	<!--[if lt IE 9]>
	<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->

	<!-- Le styles -->
	<link href="/assets/resources/bootstrap/css/bootstrap.min.css" rel="stylesheet">
	<link href="/assets/resources/font-awesome/css/font-awesome.min.css" rel="stylesheet">
	<link href="/assets/resources/syntax/syntax.css" rel="stylesheet">
	<link href="/assets/resources/gcal/jquery.gcal_flow.css" rel="stylesheet">
	<link href="/assets/css/style.css" rel="stylesheet">

	<!-- Le fav and touch icons -->
	<!-- Update these with your own images
	<link rel="shortcut icon" href="images/favicon.ico">
	<link rel="apple-touch-icon" href="images/apple-touch-icon.png">
	<link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
	<link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
	-->

	<link rel="alternate" type="application/rss+xml" title="" href="/feed.xml">
</head>

<body>
	<nav class="navbar navbar-default visible-xs" role="navigation">
		<!-- Brand and toggle get grouped for better mobile display -->
		<div class="navbar-header">
			<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
				<span class="sr-only">Toggle navigation</span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			</button>
			
			<a type="button" class="navbar-toggle nav-link" href="http://github.com/squinones">
				<i class="fa fa-github"></i>
			</a>
			
			
			<a type="button" class="navbar-toggle nav-link" href="http://twitter.com/ieatkillerbees">
				<i class="fa fa-twitter"></i>
			</a>
			
			
			<a type="button" class="navbar-toggle nav-link" href="mailto:samantha@tembies.com">
				<i class="fa fa-envelope"></i>
			</a>
			
			<a class="navbar-brand" href="/">
				<img src="assets/media/b4panel.png" class="img-circle" />
				
			</a>
		</div>

		<!-- Collect the nav links, forms, and other content for toggling -->
		<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
			<ul class="nav navbar-nav">
				<li class="active"><a href="/">Home</a></li>
				<li><a href="/calendar.html">Calendar</a></li>
				<li><a href="/categories.html">Categories</a></li>
				<li><a href="/tags.html">Tags</a></li>
			</ul>
		</div><!-- /.navbar-collapse -->
	</nav>

	<!-- nav-menu-dropdown -->
	<div class="btn-group hidden-xs" id="nav-menu">
		<button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
			<i class="fa fa-bars"></i>
		</button>
		<ul class="dropdown-menu" role="menu">
			<li><a href="/"><i class="fa fa-home"></i>Home</a></li>
			<li><a href="/categories.html"><i class="fa fa-folder"></i>Categories</a></li>
			<li><a href="/tags.html"><i class="fa fa-tags"></i>Tags</a></li>
			<li class="divider"></li>
			<li><a href="#"><i class="fa fa-arrow-up"></i>Top of Page</a></li>
		</ul>
	</div>

	<div class="col-sm-3 sidebar hidden-xs">
		<! -- sidebar.html -->
<header class="sidebar-header" role="banner">
	<a href="/">
		<img src="/assets/media/b4panel.png" class="img-circle" />
		<!-- <img src="http://www.gravatar.com/avatar/24368af16c4b0946ece77da839b7b53a?s=150" class="img-circle" /> -->
	</a>
	<h3 class="title">
        <a href="/"></a>
    </h3>
</header>


<div id="bio" class="text-center">
	PHP & Python hacker, lead engineer @POLITICO
</div>


<div id="contact-list" class="text-center">
	<ul class="list-unstyled list-inline">
		
		<li>
			<a class="btn btn-default btn-sm" href="https://github.com/squinones">
				<i class="fa fa-github-alt fa-lg"></i>
			</a>
		</li>
		
		
		<li>
			<a class="btn btn-default btn-sm" href="https://twitter.com/ieatkillerbees">
				<i class="fa fa-twitter fa-lg"></i>
			</a>
		</li>
		
		
		<li>
			<a class="btn btn-default btn-sm" href="https://linkedin.com/pub/asd123">
				<i class="fa fa-linkedin fa-lg"></i>
			</a>
		</li>
		
		
		<li>
			<a class="btn btn-default btn-sm" href="mailto:samantha@tembies.com">
				<i class="fa fa-envelope fa-lg"></i>
			</a>
		</li>
		
		<li>
			<a class="btn btn-default btn-sm" href="/feed.xml">
				<i class="fa fa-rss fa-lg"></i>
			</a>
		</li>
	</ul>
</div>
<div>
	<ul id="twitter-widget" class="list-unstyled">
		<a class="twitter-timeline" href="https://twitter.com/ieatkillerbees" data-widget-id="510951210841427968">Tweets by @ieatkillerbees</a>
		<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+"://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
	</ul>
</ul>
</div>
<! -- sidebar.html end -->

	</div>

	<div class="col-sm-9 content-body col-sm-offset-3">
		<div class="page-header">
  <h1>Samantha Quiñones </h1>
</div>



<article class="home">

  <span class="post-date">
    
    May
    26th,
    
    2014
  </span>

  <h2>
    <a href="/community/2014/05/26/phptek-2014-retrospective.html">php|tek 2014 Retrospective</a>
  </h2>

  <div>
    
    
    <h2 id="phptek-the-hottest-thing-in-chicago-thats-not-a-giant-metal-space-bean">php|tek: The Hottest Thing in Chicago (that’s not a giant metal space bean)</h2>
<p>So, php|tek has come and gone and everyone is hopefully starting to catch up on their sleep. This was my second visit to tek and while it was delightfully familiar, the conference had an entirely different energy compared to last year. From what I hear, this was the largest tek yet, and maybe it was the increased attendance that is responsible for the very different feel. During lunch breaks, the large central atrium at the venue was totally abuzz and each table was packed and lively with conversation. The atrium was pretty well packed, in fact, well in to the night with attendees talking and playing games. Not only was the conference well attended, but I understand that roughly half of the attendees were coming to tek for the very first time. In keeping with the conference’s Star Trek/SciFi theme, each attendee received a color-coded shirt: yellow for speakers (Captains in the chromatic language of the original Star Trek series), blue for repeat attendees, and red for first-timers. The venue was very, very well represented with red shirts!</p>


    
    
  </div>

</article>


<article class="home">

  <span class="post-date">
    
    March
    29th,
    
    2014
  </span>

  <h2>
    <a href="/2014/03/29/nomad-coming.html">Nomad is coming!</a>
  </h2>

  <div>
    
    
    <p>I've been in the software engineering business for a long time, but until I was introduced to the PHP community, I never really cared to engage in the social aspect of this profession. I really feel that the PHP community is something unique. It's rare to find a community that stands on the firm foundation of long-established friendships that is also so incredibly welcoming to newcomers.</p>
<p>I am still staggered by the friendship and support that has been given to me by people in the PHP world. The commitment that people have in the PHP community to raise one another up and to share their triumphs and frustrations, should be a model towards which every tech community should aspire.</p>
<p>One great way to get involved is to attend Nomad PHP, a monthly on-line miniconf where devs come together to share their knowledge and experience. I am immeasurably proud to have the opportunity to team up with Nomad PHP this month and share something that I'm very passionate about. <a href="http://nomadphp.com/2014/01/24/april-2014/">Please join me April 17th at 8pm CDT to talk about the REST API, where it came from and where it's going, and how you can build better ones</a>.</p>
<p>REST is more than just a buzzword in a recruiting email. It describes a pattern for organizing and delivering content that is tremendously appealing because of of its relative simplicity and low overhead. Understanding where the idea of REST comes from, and how established and emerging standards are used to construct REST APIs, will give you the edge you need to build highly effective APIs that are a breeze to scale, test, and maintain. You definitely don't want to miss it!</p>



    
    
  </div>

</article>


<article class="home">

  <span class="post-date">
    
    February
    8th,
    
    2014
  </span>

  <h2>
    <a href="/project%20laravel/2014/02/08/project-laravel-first-impressions.html">Project Laravel -- Session 1: First impressions</a>
  </h2>

  <div>
    
    
    <p>I was super excited when I found a couple of free hours to finally sit down with Laravel and kick off my little blog project. That two hour time box turned out to be pretty important to this effort. I hit up <a href="http://puphpet.com">puphpet.com</a> to get a quick-and-dirty little debian development server running and loaded up the Laravel <a href="http://laravel.com/docs/quick">quick start</a>. Unfortunately I glossed over the very clear instructions about the necessary permissions for the app/storage path and lost about 10 minutes trying to figure out why I was white screening, but from the moment I sat down to the point where I had a functioning skeleton installed totaled maybe 20 or 25 minutes. I started in on my first goal, a simple database-backed authentication system.</p>
<p>I won't go in to details on a topic as well-trod as that, but I think it speaks extremely highly of Laravel's approachability that I was able to build out a reasonably rich authentication system in a little more than an hour, including command-line tools to provision and manage users. I've worked in a number of PHP frameworks large and small, from Codeigniter, Fuel, and Yii to Zend and Symfony, but I have never felt as immediately productive in any of them as I did sitting down with Laravel.  That alone goes a huge way to explaining how this framework has managed to enchant such a huge segment of the greater PHP community. The prospect of the drop-in structure of a framework without the steep learning curve is incredibly alluring.</p>
<p>Almost alluring enough to offset some of the things that I wasn't quite as comfortable with. I want to say, I went in to this determined to give facades a fair shot but they didn't make a great impression. I am the kind of person who likes to know what's going on under the hood and facades seemed determined to get in my way. I don't like feeling frustrated trying to find how something is implemented, and I found myself in that position a handful of times during this first exposure and it left a definite bad taste in my mouth. Maybe it's just my lack of familiarity with the framework, or maybe as a python dev, I just have a bias towards the explicit over the implicit, but if it weren't for the fact that facades are optional, I think my experiment might have ended right then and there.</p>
<p>So, the takeaway from my first brush with Laravel is that it's a very welcoming piece of technology that invites you to step in and immediately start creating stuff, which is awesome. I'd love for the non-facade style to have a more prominent place in the docs. The idea is explained very succinctly by <a href="http://taylorotwell.com/">Taylor Otwell himself on his personal blog</a>, but I think it would do a lot to quell some of the criticism-- not to mention, make the framework a bit more welcoming to people, like me, who just reflexively distrust "magic"--  if the DIC itself were more visibly in the docs.</p>
<p>Next session I'll be building my content management back-end and wiring up mongo. I'm really looking forward to doing some real work with Laravel at last!</p>



    
    
  </div>

</article>


<article class="home">

  <span class="post-date">
    
    January
    24th,
    
    2014
  </span>

  <h2>
    <a href="/community/2014/01/24/jamming-feds.html">Jamming with the Feds</a>
  </h2>

  <div>
    
    
    <p>"What on Earth is a Data Jam?" is precisely the question I asked myself yesterday afternoon when an email inviting me to participate in a White House Data Jam on STEM Workforce Quality, Flow, and Diversity landed in my inbox. Reading through some of the supplied documents made things only a little bit clearer. Despite the confusion and misgivings, I figured being asked if I want to come to a White House <em>anything</em> is a good enough reason to apply the Jim Halpert maxim and simply reply, "absolutely, I do."</p>
<p><img class="aligncenter" title="Getting to work at the White House" alt="Getting to work at the White House" src="assets/Beq5lvAIgAAEWUv.jpg" width="176" height="234" /></p>
<p>So that's why at a shockingly early and frigid hour this morning, I found myself trudging down a quiet street in downtown Washington on my way to the Eisenhower Executive Office Building. After clearing security, I made my way upstairs to a large conference room, poured myself a cup of coffee (sweetened with splenda from yellow paper packets emblazoned with the Seal of the President of the United states!), and took a seat among a sea of a bunch of very, very smart people.</p>
<p>It was through the introduction that the point of all this finally became clear. I was aware of the Obama Administration's support for government open data initiatives, which I praised in a very detached, "hey, open data's cool" kinda way, but I was not at all in tune with the very real ways in which the Federal government is trying to put this stuff in to practice.</p>
<p>One of the big problems, as any open data advocate can tell you, is that governments amass just gigantic quantities of data in the course of their day-to-day... governing, but there aren't often clear ways to use it or even consistently access it. This is data, of course, that's held by the government in trust for the benefit of the the people as a whole, but it really doesn't do a lot of good to anyone if it's locked away in some database that no one's ever heard of.</p>
<p>And so this is where Data Jams come in. I think we're all so conditioned to see the government as hopelessly bureaucratic and glacial that something like a Data Jam is actually a little bit shocking. It's a simple concept: get a bunch of government stewards of various datasets, potential consumers of that data, entrepreneurs and other private sector people in closely related fields, and some software developers together in a room and come up with 5 or 10 really good, actionable ideas for making that data work for the American people.</p>
<p>Since I'm not so sure about the etiquette of these things, and some folks were already a little on edge having someone from POLITICO hanging around**, I won't go too deeply in to the proceedings, but I have to say that I was amazed by what we accomplished in 6 short hours together. Brainstorming with a neuroscientist, a senior manager in the Federal service, an open data specialist, other developers, and human resources gurus really stretched my brain out in weird ways that I have to say I really enjoyed. And coming away from it, I feel like we actually did hit on some good, practical ideas that have the potential to make the Federal service, and the American workforce in general, just a tiny bit better.</p>
<p>I guess most importantly to me, it was a reminder that we can all serve society in our own ways. Not all of us are meant to be soldiers or politicians or diplomats. I'm just simple programmer who really likes building cool APIs, and if I can help, anyone can.</p>
<p><em>**I feel the need to make a strong disclaimer here that while I am employed by POLITICO, I'm in no way a journalist and I have no pretensions of being one. I have a tremendous amount of respect for my colleagues in the journalism organization at POLITICO and while I'm always proud to represent the company, my participation today was primarily as a member of the broader technology community.</em></p>



    
    
  </div>

</article>


<article class="home">

  <span class="post-date">
    
    January
    21st,
    
    2014
  </span>

  <h2>
    <a href="/development/project%20laravel/2014/01/21/project-laravel.html">Project Laravel</a>
  </h2>

  <div>
    
    
    <p>I've always been pretty candid about the fact that I'm not a big fan of frameworks. I think they're great for prototyping and for very simple applications. In my experience, though, whatever time you save starting your application up is lost when the inevitable quirky requirements and unexpected complexities force you to eventually extricate parts of your app from the framework you built it in.</p>
<p>That said, I have a number of friends who happen to be big Laravel fans and I've told most of them, at one point or another, that I'm willing to give it an honest chance before I write it off completely (like most other "full-stack" frameworks.) <a title="Patryk Kruk" href="http://twitter.com/patkruk">Patryk Kruk</a>, one of my colleagues at <a title="Politico" href="http://www.politico.com">POLITICO</a>, is a particularly persistent voice in my ear both to give Laravel a shot and to actually update my blog on occasion, so I dedicate this project to him.</p>
<p>This site is sitting in a dusty corner of a shared hosting account that I've had sitting around for years. It's well past time to modernize and move it. That's my project: rebuild this personal site (in my spare time between work, personal projects, and other commitments) using Laravel and move it off this shared hosting account that I probably should have closed during the Bush administration.</p>
<h3>The Parameters</h3>
<ul>
<li>Use all the "main" features of Laravel (i.e. Eloquent, facades, etc.) at least once.</li>
<li>Gotta have serviceable blogging functionality that isn't a complete PITA to use.</li>
<li>Blog my progress at least weekly, even if it's just to say I didn't do anything.</li>
<li>Make the code freely available.</li>
</ul>
<p>That's all there is to it, really. At least I'll finally be able to get the Laravel fans in my life off my back. </p>
<p>Or maybe I'll end up joining them?</p>



    
    
  </div>

</article>


<article class="home">

  <span class="post-date">
    
    January
    18th,
    
    2014
  </span>

  <h2>
    <a href="/community/2014/01/18/skiphp-talk-slides.html">SkiPHP Talk Slides</a>
  </h2>

  <div>
    
    
    <p>SkiPHP has been a blast. The organizers have done a fantastic job putting together an amazing conference!</p>
<p>If you're interested in viewing the slides from my talks, they're available on speakerdeck, so please check them out!</p>
<p><a href="https://speakerdeck.com/squinones/demystifying-the-rest-api" title="Demystifying the REST API">Demystifying the REST API</a><br />
<a href="https://speakerdeck.com/squinones/designing-service-architectures-for-the-cloud" title="Designing Service Architectures for the Cloud">Designing Service Architectures for the Cloud</a></p>



    
    
  </div>

</article>


<article class="home">

  <span class="post-date">
    
    November
    20th,
    
    2013
  </span>

  <h2>
    <a href="/development/2013/11/20/juggle-chainsaws.html">Juggle Chainsaws, Not Types</a>
  </h2>

  <div>
    
    
    <p>No matter how popular an activity it is, I really don't like to bash on PHP. Every language has its flaws when you look closely enough, and if PHP wears its idiosyncrasies a little closer to the surface than most, I think it makes up for it in other ways. PHP's handling of types, however, is confusing at best and at worst completely deranged.</p>
<p>I've seen intercity rail schedules that can't hold a candle to PHP's <a href="http://us1.php.net/types.comparisons">type comparison tables</a>. The bizarre and unexpected behaviors that can result from a non-strict comparison has all but rendered the equality operator (==) useless. The typical advice from PHP master to PHP neophyte is, always check for identicality (===) unless you're very sure what you're doing.</p>
<p>In fact, as part of our pre-screening process at Politico, we often ask PHP developer candidates to explain why the following expression evaluates as true.</p>
<pre>("politico" == 0);</pre>
<p>This question probably wont stump a PHP developer with any significant experience. If you manage to code in PHP for more than a few months without running face-first in to this issue, you might not be trying hard enough.</p>
<p>PHP is weakly typed in much the same way that water is slightly dry. When faced with the expression above, the interpreter tries to make sense of things by converting the string in to a number, following a single and actually <a href="http://www.php.net/manual/en/language.types.string.php#language.types.string.conversion">quite well documented set of rules.</a> To put it simply, if the string contains a '.', or the letter 'e', PHP will attempt to turn it in to a float. Otherwise, it turns it in to an integer. If the string starts with "valid numeric data," those numbers will be used as a value of the new integer (e.g. (int) "123foo" -&gt; 123). If the string doesn't start with a number, the value will be 0. The literal string "politico" starts with a 'p', which is not a number, and so the interpreter rewrites the above expression like so:</p>
<pre>(0 == 0);</pre>
<p>The obvious second half of that question is, how do you make PHP give you an answer that isn't quite as... insane? You use the special identicality operator (===), more commonly called the triple-equal. This operator compares the types of the values in the expression, and if they don't match, it doesn't go through the whole circus act and just returns false.</p>
<p>Cute, right? Maybe until you realize that this behavior happens to catch a lot of unsuspecting programmers, especially ones who are new to the profession. Sometimes it creates subtle and hard-to-reproduce bugs, and sometimes it creates <a href="http://en.securitylab.ru/lab/PT-2012-29">serious vulnerabilities</a>.</p>
<p>Once in a while, it'll even catch a more experienced programmer.</p>
<p>I was recently implementing a fairly simple class with a setter method. The method accepts one argument and checks to see if it is in a list of allowed arguments before setting a protected property. If the argument is not in the list of allowed arguments, an exception is thrown. These arguments are configuration options that are generally expressed through the use of pre-defined constants and our code is merely storing the value.</p>
<pre>public function setFoo($foo)
{
    $validOptions = [VALID_CONSTANT_A, VALID_CONSTANT_B];
    if (!in_array($foo, $validOptions)) { 
        throw new InvalidArgumentException("foo must be one of: " . implode(", ", $validOptions)); 
    } 
    $this->foo = $foo; 
}</pre>
<p>Even for a setter method, this is pretty unremarkable. Yet when we run our unit tests, we get an interesting failure. Our test that passes in an invalid argument expects to see an exception, but it doesn't. In fact, this method accepts almost any string as valid. And despite my being way more familiar with PHP's weird type handling than I really want to be, it still took me several minutes to figure out what was going on here.</p>
<p>Those constants are a form of abstraction, hiding an implementation detail of one of our class's dependencies that we shouldn't have to care about. If the dependency ever decides to change that implementation, using the constants means we don't have to alter our code to keep up. But ignorance is often misguided bliss because VALID_CONSTANT_A is actually set to the integer 0, and by default, the in_array function doesn't do a strict, type-safe comparison.</p>
<p>Let's make a quick fix...</p>
<pre>public function setFoo($foo)
{
    $validOptions = [VALID_CONSTANT_A, VALID_CONSTANT_B];
    if (!in_array($foo, $validOptions, true)) { 
        throw new InvalidArgumentException("foo must be one of: " . implode(", ", $validOptions)); 
    } 
    $this->foo = $foo; 
}</pre>
<p>In case you didn't notice the change, in_array accepts a third argument, a boolean which forces strict comparison when set to true. Now our unit tests pass and our crisis is averted.</p>
<p>Maybe there's a parable here. It's a pretty vivid illustration of why unit tests are worth our time and effort, if nothing else. Still, it nags at me. At the very best, silly things like this eat up valuable time. I don't even want to consider the very worst.</p>



    
    
  </div>

</article>


<article class="home">

  <span class="post-date">
    
    September
    12th,
    
    2013
  </span>

  <h2>
    <a href="/2013/09/12/speaking-ski-php-jan-17th-18th-2013.html">Speaking at Ski PHP, Jan 17th & 18th, 2013</a>
  </h2>

  <div>
    
    
    <p>I'll be talking about Service Architectures and REST APIs. Should be exciting! Hope to see you there!</p>
<p>&nbsp;</p>
<p><a href="https://www.skiphp.com/attend/schedule">https://www.skiphp.com/attend/schedule</a></p>



    
    
  </div>

</article>


<article class="home">

  <span class="post-date">
    
    June
    27th,
    
    2013
  </span>

  <h2>
    <a href="/devops/2013/06/27/push-bamboo-notifications-to-datadog.html">Pushing Bamboo Notifications to Datadog</a>
  </h2>

  <div>
    
    
    <p>In my last post, I mentioned that where I work, we settled on Bamboo as our continuous integration solution. I love Bamboo, but its built-in notification features are pretty lacking. In fact, your only options out of the box are XMPP messaging (with no conferencing, so meh) or email (yech).</p>
<h2>I &lt;3 Datadog</h2>
<p style="text-align: center;"><a href="http://datadoghq.com"><img class="aligncenter" alt="" src="assets/dd_logo_white_trim-300.png" width="300" height="62" /></a></p>
<p>Another tool we use at <a href="http://politico.com" target="_blank">Politico</a> is <a href="http://datadoghq.com" target="_blank">Datadog</a>. If you're not familiar with it, Datadog is an amazing hosted devops tool that combines rich visualization of metrics data with very nifty event streams and quasi-social groupwarish features. Datadog is changing how devs and system admins work in our environment, and we're increasingly looking for ways that it can make our lives better.</p>
<p>Datadog is our central event management platform, and having our build events there cuts Bamboo off from the rest of our notification pipeline, and that's just the pits. Over the past day or two, the Politico Tech Lab has been abuzz with increasingly Rube-Goldbergian ideas for how to solve what boils down to a very simple problem: how do we push a tiny blob of text across the Internet. Eventually we came to the idea of setting up an XMPP server that both Bamboo and our IRC bot could long in to, with the goal of teaching the IRC bot to forward messages to Datadog's API. Yeah, silly.</p>
<p>Then, suddenly, the clouds parted and the heavenly chorus picked up and the solution presented itself as clear as crystal: python.</p>
<h2>Python to the Rescue</h2>
<p>Python's standard library includes a simple, but very functional SMTP server implementation. Yeah, that's right, we built a mail server.</p>
<p>The code's very short, but we can take a quick tour.</p>
<pre>import asyncore
import email
import socket
from dogapi import dog_http_api as api
from smtpd import SMTPServer</pre>
<p>We'll need the basic asynchronous socket server module, email (to tame Bamboo's HTML mishmash), the socket module, the basic SMTPServer module from smtpd, and Datadog's API, which is available from the cheese shop with a simple 'pip install dogapi'.</p>
<pre>class Server(SMTPServer):
    def __init__(self, dd_api_keys, host="127.0.0.1", port=4242):
        self.dd_api_keys = dd_api_keys
        asyncore.dispatcher.__init__(self)
        self.create_socket(socket.AF_INET, socket.SOCK_STREAM)
        self.set_reuse_addr()
        self.bind((host, port))
        self.listen(5)</pre>
<p>Now we just have to extend the SMTPServer class. We'll need to take in some datadog api keys (as a tuple, in this case), as well as an address to bind to and a port to listen on. SMTPServer itself extends asyncore.dispatcher, so we need to init correctly before setting up a socket to listen on.</p>
<pre>    def process_message(self, peer, sender, recipients, body):
        api_key, app_key = self.dd_api_keys

        message = email.message_from_string(data)
        title   = " ".join(self.message["subject"].split("\n"))
        text    = message.get_payload(0)

        api.event(title, text)</pre>
<p>The method 'process_message' will be called any time a mail client delivers a message to our server for delivery. We'll get information about the peer as a standard (addr,port) tuple, the sender's address as a string, a list of recipient email addresses, and the message body also as a string.</p>
<p>At this point, we go ahead and unpack those api keys. The python email module will break up the raw email message enough to make things simpler. We can easily grab the subject to use as our event title. Bamboo sends multipart messages with the plaintext body in the first part, so we just use get_payload to pull out the 0th index.</p>
<p>Calling api.event will fire the event off to Datadog.</p>
<pre>if __name__ == '__main__':
    apikey = 
    appkey = 
    server = Server((apikey, appkey))
    asyncore.loop()</pre>
<p>And last, we instantiate our server and start our little server up.</p>
<h2>Wrapping it Up</h2>
<p>In our actual implementation, we ended up massaging this data a bit more to clean things up and make the events conform more to our own internal needs and desires. This code is what remains after that stuff has been chopped out, so NB, I haven't even attempted to execute it and may not run as is. It should be enough to get you started on your own sneaky little SMTP server</p>
<p>&nbsp;</p>
<h2>Further Reading</h2>
<ul>
<li><a href="http://datadoghq.com" target="_blank"><span style="line-height: 13px;">Check out Datadog's website and free trial. Seriously, these guys are awesome!</span></a></li>
<li><a href="https://gist.github.com/squinones/5881996">Grab the (possibly) working code!</a></li>
</ul>



    
    
  </div>

</article>


<article class="home">

  <span class="post-date">
    
    June
    12th,
    
    2013
  </span>

  <h2>
    <a href="/devops/2013/06/12/continuous-integration-deployment-with-php.html">Why you should consider Continuous Integration</a>
  </h2>

  <div>
    
    
    <p>Last night at <a title="DCPHP Meetup" href="http://www.meetup.com/DC-PHP" target="_blank">DCPHP</a>, I gave a short "lightning" talk on <a href="https://speakerdeck.com/squinones/continuous-integration-and-deployment-with-php" target="_blank">Continuous Integration and Deployment</a> in the context of PHP applications. I really like the lightning talk format as it forces you to focus on the meat of your topic-- there's no time to get distracted by details. As great as that is, though, I wanted to expand a little on the subject and touch on some of the details that I couldn't include in my presentation.</p>
<h3>What is Continuous Integration?</h3>
<p>Continuous Integration is a grand-sounding name for a very simple concept. Every time you make a change to your application's code (or, at least, on a very frequent and recurring basis), you build and test the entire application. Each change is integrated in to the application immediately.</p>
<p>Of course building and testing your entire application after each and every commit seems like a big task, and it is. Because we're building so frequently, it's essential that our building and testing happens automatically. Human intervention in the process has to be limited only to occasions when a build fails. When everything builds successfully, it should happen in the background like magic.</p>
<h3>What's Wrong With Traditional Build/Deployment Practices?</h3>
<p>To answer that question, it's important that we think about everything that usually goes in to building and deploying an application, specifically a web-facing PHP application. Very often there are configuration files that need to be modified. Bootstrap scripts and autoloaders need to be updated. Sometimes we find ourselves writing scripts to move files around, or update databases.</p>
<p>Hopefully part of the process involves running some kind of automated tests.</p>
<p>And once all of that is done, and it's time to deploy, we find ourselves staring at an FTP client. Often we use our VCS as a deployment tool, which is great because typing 'svn update' is so simple, but how many of you have ever left a .git directory or some other VCS artifact hanging out there for the world to see?</p>
<p>Sometimes we're stuck copying and editing files by hand in production, which is the kind of thing that gives me nightmares.</p>
<p>To put it bluntly, building and pushing by hand sucks. It's extremely error-prone and however unintuitive it may sound, the more you do it, the more likely you are to screw something up. When it's two in the morning and you're tired and you've done it a million times before, your attention wanders. You forget a step. You push the wrong thing out to production or forget to run a database update script and now you have a fire on your hands. Several years ago I was manually moving a production application between two servers for routine maintenance. It was something I had done hundreds of times before. I forgot to scp a file over and brought the system up on a month-old copy of the database. It took two days to set things straight again. That was a lesson I don't think I could ever forget.</p>
<p>If that's not bad enough, doing it by hand encourages another kind of laziness. We're developers and when we see problems, it's in our nature to fix them. "It's just a simple fix," we'll tell ourselves. Maybe no one's noticed it's broken yet and a quick edit to that one file will save the headache of a problem report in the morning. Maybe we'll remember to commit the change to the repo as well, or maybe in six weeks that bug will show its ugly face again the next time someone deploys the unedited version of the code from git.</p>
<h3>There is a Better Way</h3>
<p>Continuous Integration is one of the practices of Extreme Programming and Agile Development. When you think about it, it's a perfect fit. Agile development is all about short, tight iterations. User story, enhancement, build, release. Lather, rinse, repeat. Martin Fowler and Kent Beck first described CI back in the late 90s and <a href="http://www.martinfowler.com/articles/continuousIntegration.html" target="_blank">Martin's original article</a> is still essential reading for any team looking to adopt the practice.</p>
<p>Before you can get started with CI, though, you need to prepare your codebase. If you don't have automated tests, you're going to need them. Going continuous relies on having confidence in the state of the application and the only way to build that confidence is through automated, repeatable tests.</p>
<p>You're also going to need an environment that's as similar to production as is reasonably possible. Today, thanks to the ease of setting up virtual machines (what up, <a href="http://vagrantup.com" target="_blank">vagrant</a> and <a href="http://puphpet.com" target="_blank">puphpet</a>!?), there's no excuse to develop and test in Windows and then deploy on Linux anymore.</p>
<p>Once your codebase is ready, it's time to start automating your builds. There are tons of tools out there to handle build automation, from ye olde make(1) to rake and phing and ant and maven and so on. I'm personally a fan of phing (which is inspired by ant and php-focused), but feel free to use whatever you're most comfortable with.</p>
<p>While you're evaluating build automation tools, don't forget about your databases! If you use an RDBMS and don't use any database migration tools, start! Database migration tools are like version control for your database, and they provide a framework for deploying database changes in a sane way. Many major PHP frameworks include a migration tool, and there are plenty of standalone tools like <a href="http://dbdeploy.com/" target="_blank">dbdeploy</a>, <a href="http://www.liquibase.org/" target="_blank">liquibase</a>, and <a href="https://bitbucket.org/zzzeek/alembic" target="_blank">alembic</a> (it's not just for python projects!).</p>
<h3>Now the Real Decisions Have to be Made</h3>
<p>What does a good build look like? How much code needs to be covered by tests before you feel confident to deploy? Should a build fail because a developer failed to follow a coding standard or forgot to add auto-documentation tags to her comments? Should a build be considered successful even if the number of findings from your static analysis tool doubled since the last release?</p>
<p>These are questions that every team needs to answer for themselves, but when you think about it, having to consider what concrete, objective criteria need to be met before you deliver software is a great problem to have!</p>
<p>This is a good time to start looking at Continuous Integration servers. There are tons of them out there, both free and commercial, but they all perform essentially the same functions. The CI server is the tool that's going to monitor your VCS repository for changes, run your build automation scripts, notify your team when things go poorly, and kick off your deployments.</p>
<p>In a future article, we'll explore each of these stages in more detail, so stay tuned!</p>
<h3>Further Reading</h3>
<ul>
<li><a href="http://www.phing.info/docs/guide/trunk/chapters/GettingStarted.html" target="_blank">Phing Getting Started Guide</a></li>
<li><a href="http://www.martinfowler.com/articles/continuousIntegration.html" target="_blank">Continuous Integration by Martin Fowler</a></li>
</ul>



    
    
  </div>

</article>

<hr/>

<ul class="pager"> 

  
  <li class="previous disabled">
    <a>&larr; Newer</a>
  </li>
  
  
  <li>
    <span class="page_number">Page: 1 of 2</span>
  </li>

  
  <li class="next">
    <a href="/page2">Older &rarr;</a>
  </li>
  

</ul>




		<footer>
			<hr/>
			<p>
				&copy; 2014 Samantha Quiñones with Jekyll. Theme: <a href="https://github.com/dbtek/dbyll">dbyll</a> by dbtek.
			</p>
		</footer>
	</div>

	<script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
	<script type="text/javascript" src="/assets/resources/bootstrap/js/bootstrap.min.js"></script>
	<script type="text/javascript" src="/assets/js/app.js"></script>
	<script type="text/javascript" src="/assets/resources/gcal/jquery.gcal_flow.js"></script>
	
</body>
</html>

